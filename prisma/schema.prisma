generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
  // moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enums
enum ProfileVisibility {
  public
  private
}

enum PetEnergyLevel {
  low
  moderate
  high
}

enum PetSpecies {
  dog
  cat
  bird
  other
}

enum PetSize {
  small
  medium
  large
}

enum PetGender {
  male
  female
}

enum PetMediaType {
  image
  video
}

model File {
  id        String  @id @default(cuid())
  key       String
  userId    String?
  extension String?
  url       String?
  type      String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("files")
}

model PetProfile {
  id    String @id @default(cuid())
  name  String
  breed String
  age   Int
  bio   String
  media Json[]

  media_type PetMediaType
  species    PetSpecies
  gender     PetGender
  size       PetSize

  visibility ProfileVisibility @default(public)

  // Optional fields
  energy_level           PetEnergyLevel?
  vaccination_status     String?
  neutered_status        String?
  temperament_tags       String[]
  available_for_adoption Boolean         @default(false)

  // Relationship 1:1
  owner_id String @unique
  owner    Owner  @relation(fields: [owner_id], references: [id], onDelete: Cascade, onUpdate: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("pet_profiles")
}

model Owner {
  id             String  @id @default(cuid())
  email          String  @unique
  auth_provider  String  @default("google")
  email_verified Boolean @default(false)

  looking_for                String[]
  preferred_meetup_locations String[]
  visibility                 ProfileVisibility @default(private)
  travel_radius              Int?
  longitude                  Float?
  latitude                   Float?
  city                       String?
  state                      String?
  zip_code                   String?
  country                    String?
  bio                        String?

  // Relationship
  petProfile PetProfile?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
}
